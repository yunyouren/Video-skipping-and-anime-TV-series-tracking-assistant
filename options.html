<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>è§†é¢‘è·³ç•¥åŠ©æ‰‹ - è®¾ç½®</title>
  <style>
    :root {
      --primary: #00aeec;
      --sidebar-bg: #f7f9fa;
      --border: #e1e4e8;
      --text: #333;
    }
    body { 
      font-family: "Segoe UI", sans-serif; 
      color: var(--text); 
      margin: 0; padding: 0; 
      display: flex; 
      height: 100vh; 
      overflow: hidden;
    }
    
    /* ä¾§è¾¹æ  */
    .sidebar {
      width: 240px;
      background: var(--sidebar-bg);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      padding-top: 20px;
    }
    .app-title {
      padding: 0 20px 20px;
      font-size: 18px;
      font-weight: bold;
      color: var(--primary);
      border-bottom: 1px solid var(--border);
      margin-bottom: 10px;
    }
    .nav-item {
      padding: 12px 20px;
      cursor: pointer;
      color: #555;
      text-decoration: none;
      display: flex;
      align-items: center;
      transition: background 0.2s;
      font-size: 14px;
    }
    .nav-item:hover {
      background: rgba(0,0,0,0.05);
      color: #000;
    }
    .nav-item.active {
      background: #e6f7ff;
      color: var(--primary);
      border-right: 3px solid var(--primary);
    }
    .nav-icon { margin-right: 10px; font-size: 16px; }

    /* ä¸»å†…å®¹åŒº */
    .main-content {
      flex: 1;
      padding: 30px 40px;
      overflow-y: auto;
      background: #fff;
    }
    
    /* é¡µé¢åˆ‡æ¢é€»è¾‘ */
    .page-section { display: none; }
    .page-section.active { display: block; animation: fadeIn 0.3s; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

    h2 { margin-top: 0; padding-bottom: 15px; border-bottom: 1px solid #eee; font-size: 20px; }
    
    .card { background: #fff; padding: 20px; border: 1px solid #eee; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.03); }
    .desc { font-size: 13px; color: #666; margin-bottom: 15px; line-height: 1.6; }

    .input-group { display: flex; gap: 10px; margin-bottom: 15px; }
    input[type="text"] { padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; flex: 1; font-size: 13px; }
    input:focus { border-color: var(--primary); outline: none; }
    
    button { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; font-size: 13px; transition: opacity 0.2s; }
    .btn-primary { background: var(--primary); color: white; font-weight: 500; }
    .btn-primary:hover { opacity: 0.9; }
    .btn-danger { background: #fff1f0; color: #ff4d4f; border: 1px solid #ffa39e; }
    .btn-danger:hover { background: #ffccc7; }

    .rule-list { border: 1px solid #eee; border-radius: 4px; max-height: 500px; overflow-y: auto; background: #fafafa; }
    .rule-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; border-bottom: 1px solid #eee; background: #fff; }
    .rule-item:last-child { border-bottom: none; }
    .rule-item:hover { background: #f0f7ff; }
    
    .tag-match { color: var(--primary); font-family: monospace; font-weight: bold; background: #e6f7ff; padding: 2px 6px; border-radius: 4px; }
    .tag-arrow { color: #ccc; margin: 0 15px; }
    .tag-name { font-weight: bold; color: #333; }

    .empty-tip { padding: 40px; text-align: center; color: #999; font-size: 14px; }
    
    #toast { 
      position: fixed; bottom: 30px; right: 30px; 
      background: #333; color: #fff; padding: 10px 20px; 
      border-radius: 4px; opacity: 0; transition: opacity 0.3s; 
      box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 100;
    }
    #toast.show { opacity: 1; }
  </style>
</head>
<body>

  <div class="sidebar">
    <div class="app-title">âš¡ è·³ç•¥åŠ©æ‰‹</div>
    <a href="#rules" class="nav-item active" data-target="rules">
      <span class="nav-icon">ğŸ·ï¸</span> ç«™ç‚¹æ ‡ç­¾è§„åˆ™
    </a>
    <a href="#series" class="nav-item" data-target="series">
      <span class="nav-icon">ğŸ“º</span> ç•ªå‰§åç§°è§„åˆ™
    </a>
    <a href="#favorites" class="nav-item" data-target="favorites">
      <span class="nav-icon">ğŸ“‚</span> æ”¶è—ç®¡ç†
    </a>
    <a href="#settings" class="nav-item" data-target="settings">
      <span class="nav-icon">âš™ï¸</span> é«˜çº§è®¾ç½®
    </a>
    <a href="#about" class="nav-item" data-target="about">
      <span class="nav-icon">â„¹ï¸</span> å…³äºä¸å¸®åŠ©
    </a>
  </div>

  <div class="main-content">
    
    <!-- è§„åˆ™è®¾ç½®é¡µ -->
    <div id="page-rules" class="page-section active">
      <h2>è‡ªå®šä¹‰ç«™ç‚¹æ ‡ç­¾ (Custom Tags)</h2>
      <div class="card">
        <div class="desc">
          åœ¨è¿™é‡Œé…ç½®åŸŸåæˆ–æ ‡é¢˜å…³é”®è¯ï¼Œå¼ºåˆ¶å°†è§†é¢‘è¯†åˆ«ä¸ºæŒ‡å®šçš„ç«™ç‚¹æ ‡ç­¾ã€‚<br>
          é€‚ç”¨äºè§£å†³ Iframe æ’­æ”¾å™¨åŸŸåå˜åŠ¨å¯¼è‡´è¢«è¯†åˆ«ä¸º "Web" çš„é—®é¢˜ã€‚ä¼˜å…ˆçº§é«˜äºå†…ç½®è§„åˆ™ã€‚
        </div>

        <div class="input-group">
          <input type="text" id="tagMatchInput" placeholder="åŒ¹é…å…³é”®è¯ (ä¾‹å¦‚: yhdmp æˆ– player.html)">
          <input type="text" id="tagNameInput" placeholder="æ˜¾ç¤ºæ ‡ç­¾å (ä¾‹å¦‚: æ¨±èŠ±)">
          <button id="btnAddRule" class="btn-primary">+ æ·»åŠ è§„åˆ™</button>
        </div>

        <div class="rule-list" id="ruleListContainer">
          <!-- åˆ—è¡¨æ¸²æŸ“åŒº -->
        </div>
      </div>
    </div>

    <!-- ç•ªå‰§è§„åˆ™é¡µ -->
    <div id="page-series" class="page-section">
      <h2>è‡ªå®šä¹‰ç•ªå‰§åç§° (Custom Series)</h2>
      <div class="card">
        <div class="desc">
          åœ¨è¿™é‡Œé…ç½®æ ‡é¢˜å…³é”®è¯ï¼Œå¼ºåˆ¶å°†ç•ªå‰§åç§°è¯†åˆ«ä¸ºæŒ‡å®šçš„åå­—ã€‚<br>
          é€‚ç”¨äºå»é™¤æ ‡é¢˜ä¸­çš„å¤šä½™åç¼€ï¼Œæˆ–ä¿®æ­£è¯†åˆ«é”™è¯¯çš„ç•ªå‰§åã€‚
        </div>

        <div class="input-group">
          <input type="text" id="seriesMatchInput" placeholder="åŒ¹é…å…³é”®è¯ (ä¾‹å¦‚: é¬¼ç­ä¹‹åˆƒ)">
          <input type="text" id="seriesNameInput" placeholder="ç›®æ ‡ç•ªå‰§å (ä¾‹å¦‚: é¬¼ç­)">
          <button id="btnAddSeriesRule" class="btn-primary">+ æ·»åŠ è§„åˆ™</button>
        </div>

        <div class="rule-list" id="seriesListContainer">
          <!-- åˆ—è¡¨æ¸²æŸ“åŒº -->
        </div>
      </div>
    </div>

    <!-- æ”¶è—ç®¡ç†é¡µ -->
    <div id="page-favorites" class="page-section">
      <h2>æ”¶è—ç®¡ç† (Favorites Manager)</h2>
      <div class="card">
        <div class="desc">
          æŸ¥çœ‹å’Œç®¡ç†æ‚¨çš„æ‰€æœ‰è§†é¢‘è¿›åº¦æ”¶è—ã€‚
        </div>
        
        <div class="input-group" style="justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
            <div style="display: flex; gap: 10px; flex: 1;">
                <select id="folderFilter" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; min-width: 120px;">
                    <option value="">æ‰€æœ‰æ–‡ä»¶å¤¹</option>
                </select>
                <input type="text" id="favSearchInput" placeholder="æœç´¢ç•ªå‰§åç§°..." style="flex: 1; min-width: 200px;">
            </div>
            <div style="display: flex; gap: 10px;">
                <button id="btnExportFavs" class="btn-primary" style="background-color: #52c41a;">å¯¼å‡º</button>
                <button id="btnImportFavs" class="btn-primary" style="background-color: #faad14;">å¯¼å…¥</button>
                <input type="file" id="importFile" style="display: none;" accept=".json">
                <button id="btnClearAllFavs" class="btn-danger">æ¸…ç©º</button>
            </div>
        </div>

        <div class="rule-list" id="favListContainer" style="max-height: 600px;">
          <!-- åˆ—è¡¨æ¸²æŸ“åŒº -->
        </div>
      </div>
    </div>

    <!-- é«˜çº§è®¾ç½®é¡µ -->
    <div id="page-settings" class="page-section">
      <h2>é«˜çº§è®¾ç½® (Advanced Settings)</h2>
      <div class="card">
        <div class="desc">
            è°ƒæ•´æ’ä»¶çš„æ ¸å¿ƒè¡Œä¸ºé€»è¾‘ã€‚
        </div>
        <div style="margin-bottom: 15px;">
            <label style="display: flex; align-items: center; cursor: pointer;">
                <input type="checkbox" id="chkOnlySaveMaxEpisode" style="margin-right: 10px; width: 16px; height: 16px;">
                <span style="font-size: 14px;">ä»…è®°å½•æœ€å¤§é˜…è¯»é›†æ•° (é˜²æ­¢è§‚çœ‹æ—§é›†æ•°æ—¶è¦†ç›–è¿›åº¦)</span>
            </label>
            <div style="font-size: 12px; color: #999; margin-left: 26px; margin-top: 5px;">
                å¼€å¯åï¼Œåªæœ‰å½“æ‚¨è§‚çœ‹çš„é›†æ•°å¤§äºå½“å‰å·²ä¿å­˜çš„é›†æ•°æ—¶ï¼Œæ‰ä¼šæ›´æ–°æ”¶è—è®°å½•ã€‚<br>
                å¦‚æœæ˜¯åŒä¸€é›†ï¼Œåˆ™ä¼šæ­£å¸¸æ›´æ–°è§‚çœ‹æ—¶é—´è¿›åº¦ã€‚
            </div>
        </div>
        <button id="btnSaveSettings" class="btn-primary">ä¿å­˜è®¾ç½®</button>
      </div>
    </div>


    <!-- å…³äºé¡µ -->
    <div id="page-about" class="page-section">
      <h2>å…³äºä¸å¸®åŠ©</h2>
      <div class="card">
        <h3>é…ç½®è¯´æ˜</h3>
        <div class="desc">
          <ul>
            <li><strong>å…³é”®è¯ï¼š</strong> æ”¯æŒ URL ç‰‡æ®µæˆ–é¡µé¢æ ‡é¢˜ç‰‡æ®µã€‚</li>
            <li><strong>ä¼˜å…ˆçº§ï¼š</strong> ç”¨æˆ·è§„åˆ™ > æ’ä»¶å†…ç½®è§„åˆ™ > é»˜è®¤ Webã€‚</li>
            <li><strong>ç”Ÿæ•ˆæ–¹å¼ï¼š</strong> æ·»åŠ æˆ–ä¿®æ”¹è§„åˆ™åï¼Œåˆ·æ–°è§†é¢‘é¡µé¢å³å¯ç”Ÿæ•ˆã€‚</li>
          </ul>
        </div>
      </div>
      <div class="card">
        <div class="desc">
          Version 3.1 <br>
          Â© 2026 Bilibili Skipper
        </div>
      </div>
    </div>

  </div>

  <div id="toast">å·²ä¿å­˜</div>

  <!-- ç§»åŠ¨æ–‡ä»¶å¤¹å¼¹çª— -->
  <div id="moveModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
      <div style="background: white; padding: 20px; border-radius: 8px; width: 300px; box-shadow: 0 4px 12px rgba(0,0,0,0.2);">
          <h3 style="margin-top: 0;">ç§»åŠ¨åˆ°æ–‡ä»¶å¤¹</h3>
          <div style="margin-bottom: 15px;">
              <label style="display: block; margin-bottom: 5px; font-size: 13px; color: #666;">é€‰æ‹©å·²æœ‰æ–‡ä»¶å¤¹ï¼š</label>
              <select id="moveFolderSelect" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                  <option value="">(ç§»å‡ºæ–‡ä»¶å¤¹ / æ— )</option>
              </select>
          </div>
          <div style="margin-bottom: 20px;">
              <label style="display: block; margin-bottom: 5px; font-size: 13px; color: #666;">æˆ–æ–°å»ºæ–‡ä»¶å¤¹ï¼š</label>
              <input type="text" id="moveNewFolderInput" placeholder="è¾“å…¥æ–°æ–‡ä»¶å¤¹å..." style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;">
          </div>
          <div style="text-align: right;">
              <button id="btnCancelMove" style="background: #f0f0f0; color: #333; margin-right: 10px;">å–æ¶ˆ</button>
              <button id="btnConfirmMove" class="btn-primary">ç¡®å®š</button>
          </div>
      </div>
  </div>

  <script src="options.js"></script>
</body>
</html>